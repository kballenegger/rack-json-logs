#!/usr/bin/env ruby

require File.expand_path('../../lib/rack-json-logs/process-line.rb', __FILE__)

STDOUT.sync = true

Signal.trap(2) do
  Process.exit(0)
end

while line = STDIN.gets
  break if line == nil

  Rack::JsonLogs.process(line)
end

puts "\nEOF.".red
